BBPATH .= ":${LAYERDIR}"
BBFILES += " \
  ${LAYERDIR}/recipes-*/*/*.bb \
  ${LAYERDIR}/recipes-*/*/*.bbappend \
"

BBFILE_COLLECTIONS += "starry"
BBFILE_PATTERN_starry := "^${LAYERDIR}/"
BBFILE_PRIORITY_starry = "7"

# Export layer directory for use in classes (e.g., for musl-headers)
LAYERDIR_meta-starry = "${LAYERDIR}"

LAYERDEPENDS_starry = "core"
LAYERSERIES_COMPAT_starry = "kirkstone mickledore nanbield scarthgap"

# Build Rust from source instead of using prebuilt binaries
# This enables full control and customization but requires 8-12 hours build time
PREFERRED_PROVIDER_cargo-native = "cargo"
PREFERRED_VERSION_cargo = "1.92.0"
PREFERRED_VERSION_cargo-native = "1.92.0"

PREFERRED_PROVIDER_rustc-native = "rust"
PREFERRED_VERSION_rust = "1.92.0"
PREFERRED_VERSION_rust-native = "1.92.0"

PREFERRED_VERSION_rust-llvm = "1.92.0"
PREFERRED_VERSION_rust-llvm-native = "1.92.0"

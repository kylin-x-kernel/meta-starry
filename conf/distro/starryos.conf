
# StarryOS build policy for Yocto.
#
# This distro is intentionally minimal: it exists mainly to centralize toolchain
# and global policy decisions (e.g. pinned Rust nightly), while keeping recipes
# focused on building individual components.

DISTRO_NAME = "starryos"
DISTRO_VERSION = "starryos.0"
require conf/distro/include/starry-rust-toolchain.inc
require conf/distro/include/starry-sdk-toolchain.inc

# Workaround for user namespace permission issues
# Disable network isolation globally to avoid "Operation not permitted" errors
BB_TASK_IONICE_LEVEL = ""
INHERIT += "network-workaround"

# Bare-metal kernel - no package management needed
# Set to ipk to satisfy image.bbclass parsing, but won't be used
PACKAGE_CLASSES = "package_ipk"

# Skip package installation for bare-metal builds
INHIBIT_PACKAGE_INSTALL = "1"
INHIBIT_PACKAGE_STRIP = "1"
